name: Code Quality Checks

on: [push, pull_request]

permissions:
  contents: read

jobs:
  lint:
    name: Run Linters
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # 安装 Node.js
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          
      # 安装并运行 HTMLHint
      - name: Install and Run HTMLHint
        run: |
          npm install htmlhint --save-dev
          npx htmlhint "**/*.html" --config .htmlhintrc

      # 安装 Stylelint
      - name: Install Stylelint
        run: |
          npm init -y
          npm install stylelint stylelint-config-standard --save-dev
      # 创建基础配置（如果还没有）
      - name: Create default .stylelintrc.json
        run: |
          echo '{
            "extends": "stylelint-config-standard"
          }' > .stylelintrc.json
        if: ${{ !hashFiles('.stylelintrc.json') }}

      # 执行 Stylelint
      - name: Run Stylelint
        run: npx stylelint "**/*.css"